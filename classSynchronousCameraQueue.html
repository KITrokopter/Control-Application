<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>KITrokopter API: SynchronousCameraQueue Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">KITrokopter API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classSynchronousCameraQueue-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">SynchronousCameraQueue Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A camera queue that tries to synchronize the <a class="el" href="classCameraData.html" title="Container for camera data. ">CameraData</a>.  
 <a href="classSynchronousCameraQueue.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="SynchronousCameraQueue_8hpp_source.html">SynchronousCameraQueue.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for SynchronousCameraQueue:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classSynchronousCameraQueue.png" usemap="#SynchronousCameraQueue_map" alt=""/>
  <map id="SynchronousCameraQueue_map" name="SynchronousCameraQueue_map">
<area href="classAbstractCameraQueue.html" title="An abstract camera queue. " alt="AbstractCameraQueue" shape="rect" coords="0,0,169,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7546a7dd98ad579b655a82c435a998e8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSynchronousCameraQueue.html#a7546a7dd98ad579b655a82c435a998e8">SynchronousCameraQueue</a> (long int arrivalDelay, long int maxDelay, long int maxGroupInterval, bool ensureCam0)</td></tr>
<tr class="memdesc:a7546a7dd98ad579b655a82c435a998e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new <a class="el" href="classSynchronousCameraQueue.html" title="A camera queue that tries to synchronize the CameraData. ">SynchronousCameraQueue</a> with the given parameters.  <a href="#a7546a7dd98ad579b655a82c435a998e8">More...</a><br/></td></tr>
<tr class="separator:a7546a7dd98ad579b655a82c435a998e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a2490309f385e49aaeaf2e902700c90"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSynchronousCameraQueue.html#a2a2490309f385e49aaeaf2e902700c90">getSize</a> ()</td></tr>
<tr class="memdesc:a2a2490309f385e49aaeaf2e902700c90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the amount of elements in the queue.  <a href="#a2a2490309f385e49aaeaf2e902700c90">More...</a><br/></td></tr>
<tr class="separator:a2a2490309f385e49aaeaf2e902700c90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a417137d03b8e5974e607e18bf41ce195"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSynchronousCameraQueue.html#a417137d03b8e5974e607e18bf41ce195">dataAvailable</a> ()</td></tr>
<tr class="memdesc:a417137d03b8e5974e607e18bf41ce195"><td class="mdescLeft">&#160;</td><td class="mdescRight">If this method returns true, there probably is data to dequeue, if it returns false there probably isn't.  <a href="#a417137d03b8e5974e607e18bf41ce195">More...</a><br/></td></tr>
<tr class="separator:a417137d03b8e5974e607e18bf41ce195"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb12ec28394224e8d9b88f6fc2e414d1"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classCameraData.html">CameraData</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSynchronousCameraQueue.html#acb12ec28394224e8d9b88f6fc2e414d1">dequeue</a> ()</td></tr>
<tr class="memdesc:acb12ec28394224e8d9b88f6fc2e414d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes and returns one or more <a class="el" href="classCameraData.html" title="Container for camera data. ">CameraData</a> from the queue.  <a href="#acb12ec28394224e8d9b88f6fc2e414d1">More...</a><br/></td></tr>
<tr class="separator:acb12ec28394224e8d9b88f6fc2e414d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classAbstractCameraQueue"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classAbstractCameraQueue')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classAbstractCameraQueue.html">AbstractCameraQueue</a></td></tr>
<tr class="memitem:ae550ea0e5f9913699c63e6f054117f05 inherit pub_methods_classAbstractCameraQueue"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractCameraQueue.html#ae550ea0e5f9913699c63e6f054117f05">enqueue</a> (std::vector&lt; <a class="el" href="classCameraData.html">CameraData</a> &gt; data)</td></tr>
<tr class="memdesc:ae550ea0e5f9913699c63e6f054117f05 inherit pub_methods_classAbstractCameraQueue"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enqueues the content of the given vector of <a class="el" href="classCameraData.html" title="Container for camera data. ">CameraData</a>.  <a href="#ae550ea0e5f9913699c63e6f054117f05">More...</a><br/></td></tr>
<tr class="separator:ae550ea0e5f9913699c63e6f054117f05 inherit pub_methods_classAbstractCameraQueue"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef9790b1d6d959fbbf1d446753ac88a3 inherit pub_methods_classAbstractCameraQueue"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractCameraQueue.html#aef9790b1d6d959fbbf1d446753ac88a3">enqueue</a> (<a class="el" href="classCameraData.html">CameraData</a> data)</td></tr>
<tr class="memdesc:aef9790b1d6d959fbbf1d446753ac88a3 inherit pub_methods_classAbstractCameraQueue"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enqueues the given <a class="el" href="classCameraData.html" title="Container for camera data. ">CameraData</a>.  <a href="#aef9790b1d6d959fbbf1d446753ac88a3">More...</a><br/></td></tr>
<tr class="separator:aef9790b1d6d959fbbf1d446753ac88a3 inherit pub_methods_classAbstractCameraQueue"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a127b2ce58b82fc67fa6fe49f9d808f1f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSynchronousCameraQueue.html#a127b2ce58b82fc67fa6fe49f9d808f1f">enqueueInternal</a> (<a class="el" href="classCameraData.html">CameraData</a> data)</td></tr>
<tr class="memdesc:a127b2ce58b82fc67fa6fe49f9d808f1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enqueues the given <a class="el" href="classCameraData.html" title="Container for camera data. ">CameraData</a>.  <a href="#a127b2ce58b82fc67fa6fe49f9d808f1f">More...</a><br/></td></tr>
<tr class="separator:a127b2ce58b82fc67fa6fe49f9d808f1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classAbstractCameraQueue"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classAbstractCameraQueue')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classAbstractCameraQueue.html">AbstractCameraQueue</a></td></tr>
<tr class="memitem:a5022d99236b76f5040b3533f6f831c73 inherit pro_methods_classAbstractCameraQueue"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classCameraData.html">CameraData</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAbstractCameraQueue.html#a5022d99236b76f5040b3533f6f831c73">toVector</a> (<a class="el" href="classCameraData.html">CameraData</a> data)</td></tr>
<tr class="memdesc:a5022d99236b76f5040b3533f6f831c73 inherit pro_methods_classAbstractCameraQueue"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a vector containing the given <a class="el" href="classCameraData.html" title="Container for camera data. ">CameraData</a>.  <a href="#a5022d99236b76f5040b3533f6f831c73">More...</a><br/></td></tr>
<tr class="separator:a5022d99236b76f5040b3533f6f831c73 inherit pro_methods_classAbstractCameraQueue"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A camera queue that tries to synchronize the <a class="el" href="classCameraData.html" title="Container for camera data. ">CameraData</a>. </p>
<p>It tries to dequeue a set of <a class="el" href="classCameraData.html" title="Container for camera data. ">CameraData</a> containing one <a class="el" href="classCameraData.html" title="Container for camera data. ">CameraData</a> for each camera known at once. That means, that if not all cameras see the quadcopter, the delay induced by this queue will be at least arrivalDelay (Set in the constructor).</p>
<p>This queue has some important parameters: </p>
<ul>
<li>
arrivalDelay: A <a class="el" href="classCameraData.html" title="Container for camera data. ">CameraData</a> has to wait at least this time in the queue, if it cannot take part in a completely filled group. </li>
<li>
maxDelay: Entries that stayed longer in the queue than maxDelay will be dequeued and returned, no matter what. </li>
<li>
maxGroupInterval: The maximum difference between the oldest and newest <a class="el" href="classCameraData.html" title="Container for camera data. ">CameraData</a> creation time in a valid group. </li>
<li>
ensureCam0: If true, a group is only valid, if it contains <a class="el" href="classCameraData.html" title="Container for camera data. ">CameraData</a> from camera 0. </li>
</ul>
<p>It is ensured that the queue always runs forward. If some data is returned, all data older than that is removed from the queue.</p>
<p>The queue uses two time values to ensure that it doesn't create too much latency and that the <a class="el" href="classCameraData.html" title="Container for camera data. ">CameraData</a> sets dequeued are as synchonous as possible. The first is the arrival time, which simply is the time the <a class="el" href="classCameraData.html" title="Container for camera data. ">CameraData</a> was inserted. The second one is the creation time of the <a class="el" href="classCameraData.html" title="Container for camera data. ">CameraData</a>, which is the time the picture that is source of the data was received from the camera.</p>
<p>For easy searching for synchronous groups, the queue is always sorted by the <a class="el" href="classCameraData.html" title="Container for camera data. ">CameraData</a> creation time.</p>
<dl class="section author"><dt>Author</dt><dd>Sebastian Schmidt </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a7546a7dd98ad579b655a82c435a998e8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SynchronousCameraQueue::SynchronousCameraQueue </td>
          <td>(</td>
          <td class="paramtype">long int&#160;</td>
          <td class="paramname"><em>arrivalDelay</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long int&#160;</td>
          <td class="paramname"><em>maxDelay</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long int&#160;</td>
          <td class="paramname"><em>maxGroupInterval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>ensureCam0</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new <a class="el" href="classSynchronousCameraQueue.html" title="A camera queue that tries to synchronize the CameraData. ">SynchronousCameraQueue</a> with the given parameters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arrivalDelay</td><td>The arrivalDelay parameter as explained <a class="el" href="classSynchronousCameraQueue.html">here</a>. </td></tr>
    <tr><td class="paramname">maxDelay</td><td>The maxDelay parameter as explained <a class="el" href="classSynchronousCameraQueue.html">here</a>. </td></tr>
    <tr><td class="paramname">maxGroupInterval</td><td>The maxGroupInterval parameter as explained <a class="el" href="classSynchronousCameraQueue.html">here</a>. </td></tr>
    <tr><td class="paramname">ensureCam0</td><td>The ensureCam0 parameter as explained <a class="el" href="classSynchronousCameraQueue.html">here</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classSynchronousCameraQueue.html" title="A camera queue that tries to synchronize the CameraData. ">SynchronousCameraQueue</a> </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a417137d03b8e5974e607e18bf41ce195"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SynchronousCameraQueue::dataAvailable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If this method returns true, there probably is data to dequeue, if it returns false there probably isn't. </p>
<p>This is a heuristic that works fine most of the time, but false positives as well as false negatives are possible.</p>
<dl class="section return"><dt>Returns</dt><dd>True if there probably is <a class="el" href="classCameraData.html" title="Container for camera data. ">CameraData</a> to dequeue, false if there probably is no <a class="el" href="classCameraData.html" title="Container for camera data. ">CameraData</a> to dequeue. </dd></dl>

<p>Implements <a class="el" href="classAbstractCameraQueue.html#aa7ff0e3b6968b516ea00b7399120a1d0">AbstractCameraQueue</a>.</p>

</div>
</div>
<a class="anchor" id="acb12ec28394224e8d9b88f6fc2e414d1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="classCameraData.html">CameraData</a> &gt; SynchronousCameraQueue::dequeue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Removes and returns one or more <a class="el" href="classCameraData.html" title="Container for camera data. ">CameraData</a> from the queue. </p>
<p>The implementation decides what exactly should be returned.</p>
<dl class="section return"><dt>Returns</dt><dd>A vector containing <a class="el" href="classCameraData.html" title="Container for camera data. ">CameraData</a>. </dd></dl>

<p>Implements <a class="el" href="classAbstractCameraQueue.html#a621fc282a497e257c89bde9eb356124e">AbstractCameraQueue</a>.</p>

</div>
</div>
<a class="anchor" id="a127b2ce58b82fc67fa6fe49f9d808f1f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SynchronousCameraQueue::enqueueInternal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCameraData.html">CameraData</a>&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enqueues the given <a class="el" href="classCameraData.html" title="Container for camera data. ">CameraData</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>The <a class="el" href="classCameraData.html" title="Container for camera data. ">CameraData</a>. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classAbstractCameraQueue.html#ad4f54335dc7df3d853125995f6940125">AbstractCameraQueue</a>.</p>

</div>
</div>
<a class="anchor" id="a2a2490309f385e49aaeaf2e902700c90"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t SynchronousCameraQueue::getSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the amount of elements in the queue. </p>
<dl class="section return"><dt>Returns</dt><dd>The size of the queue. </dd></dl>

<p>Implements <a class="el" href="classAbstractCameraQueue.html#a6ec0d21f704ac138fb35996d66f85ff3">AbstractCameraQueue</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/position/tracking/<a class="el" href="SynchronousCameraQueue_8hpp_source.html">SynchronousCameraQueue.hpp</a></li>
<li>src/position/tracking/<a class="el" href="SynchronousCameraQueue_8cpp.html">SynchronousCameraQueue.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Apr 17 2014 15:15:05 for KITrokopter API by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
